# RealWorld 앱 프로덕트 요구사항 문서 (PRD)

## 1. 프로젝트 개요

### 1.1 프로젝트 설명
RealWorld는 Medium.com 클론과 같은 소셜 블로깅 플랫폼입니다. 이 프로젝트는 실제 프로덕션 수준의 풀스택 애플리케이션을 구현하는 것을 목표로 하며, 다양한 프레임워크와 라이브러리의 실제 사용 사례를 보여주는 교육용 레퍼런스 아키텍처입니다.

### 1.2 핵심 철학
- **단순성과 견고성의 균형**: 프레임워크를 처음 접하는 개발자도 10분 이내에 아키텍처를 파악할 수 있어야 합니다
- **MVP 수준의 품질**: 기능적으로 완전하고 안정적이지만 불필요하게 과도하게 엔지니어링되지 않아야 합니다
- **베스트 프랙티스**: 편의성을 위해 기본적인 베스트 프랙티스를 희생해서는 안 됩니다

### 1.3 구현 요구사항
- 모든 명시된 기능이 완전히 구현되어야 함
- GitHub 저장소에 코드 공개 (Issues 섹션 활성화)
- 구현 방법과 로컬 설정 설명이 포함된 포괄적인 README
- 최소 1개 이상의 유닛 테스트 필수 (포괄적인 테스트 커버리지 권장)
- 사용하는 프레임워크/라이브러리는 최소 300개 이상의 GitHub 스타 필요

### 1.4 기술 스택

본 프로젝트는 **Agentic Coding 방법론**에 최적화된 기술 스택을 사용합니다. AI 에이전트와의 협업을 고려하여 명시적이고 간단하며 안정적인 기술을 선택했습니다.

#### 1.4.1 백엔드
- **언어**: Go
  - 명시적인 컨텍스트 시스템으로 AI 에이전트 작업 용이
  - 간단한 테스트 실행 (구문 혼동 없음)
  - 구조적 인터페이스로 예측 가능한 코드
  - 안정적인 생태계 및 하위 호환성
- **데이터베이스**: SQLite
  - 경량 임베디드 데이터베이스
  - Plain SQL 사용 (ORM 대신) - AI가 우수한 SQL 생성
  - 파일 기반으로 배포 및 테스트 간편
- **인증**: JWT (JSON Web Token)
  - `golang-jwt/jwt` 또는 유사 라이브러리 사용

#### 1.4.2 프론트엔드
- **프레임워크**: React
  - 컴포넌트 기반 UI 구축
  - 풍부한 생태계 및 커뮤니티 지원
- **빌드 도구**: Vite
  - 빠른 개발 서버 및 빌드
  - 모던 프론트엔드 개발에 최적화
- **스타일링**: Tailwind CSS + shadcn/ui
  - Tailwind CSS: 유틸리티 우선 CSS 프레임워크
  - shadcn/ui: 재사용 가능한 컴포넌트 라이브러리
  - 일관성 있고 커스터마이징 가능한 디자인 시스템
- **상태 관리**: TanStack Query
  - 서버 상태 관리 및 캐싱
  - API 호출 최적화
- **라우팅**: TanStack Router
  - 타입 안전한 라우팅
  - 클라이언트 사이드 네비게이션
- **Markdown 렌더링**: react-markdown 또는 유사 라이브러리
  - 게시글 본문의 Markdown 표시

#### 1.4.3 개발 도구 & 인프라
- **컨테이너화**: Docker
  - 개발 환경 일관성 보장
  - 프로덕션 배포 간소화
  - 의존성 격리
- **빌드 자동화**: Makefile
  - 주요 프로세스 관리 (빌드, 테스트, 실행)
  - AI 에이전트가 사용하기 쉬운 도구
  - pidfile 보호를 통한 프로세스 관리
- **로깅**: 파일 기반 로깅
  - stdout뿐만 아니라 파일에 로그 기록
  - 디버깅 및 모니터링 용이

#### 1.4.4 Agentic Coding 개발 원칙
- **간단한 코드 선호**: 복잡한 추상화보다 명확하고 직관적인 코드 작성
- **설명적인 함수명**: 함수 이름만으로도 기능을 이해할 수 있도록 작성
- **함수 우선**: 클래스보다 함수 기반 프로그래밍 선호
- **상속 회피**: 복잡한 상속 구조 대신 컴포지션 사용
- **코드 생성 우선**: 불필요한 외부 의존성 추가보다 필요한 코드 직접 생성
- **권한 검사 지역화**: 권한 검사 로직을 로컬에서 명시적으로 확인 가능하게 작성
- **빠르고 사용자 친화적인 도구**: LLM의 예측 불가능한 사용 패턴에도 견딜 수 있는 견고한 도구 구축

---

## 2. 핵심 기능 요구사항

### 2.1 인증 및 사용자 관리

#### 2.1.1 사용자 인증
- **JWT 기반 인증** 구현
- 로그인/회원가입 페이지
- 설정 페이지의 로그아웃 버튼
- Authorization 헤더 형식: `Authorization: Token jwt.token.here`

#### 2.1.2 사용자 관리 (CRU 작업)
- **회원가입**: 사용자명, 이메일, 비밀번호로 신규 계정 생성
- **로그인**: 이메일과 비밀번호로 로그인
- **프로필 조회**: 현재 사용자 정보 조회
- **프로필 수정**: 이메일, 사용자명, 비밀번호, 프로필 이미지, 소개 수정

### 2.2 게시글 관리

#### 2.2.1 게시글 CRUD
- **생성**: 제목, 설명, 본문, 선택적 태그 목록으로 게시글 작성
- **조회**:
  - 전체 게시글 목록 조회 (페이지네이션 지원)
  - 개별 게시글 상세 조회
  - 팔로우한 사용자의 게시글 피드
- **수정**: 게시글 필드 업데이트
- **삭제**: 게시글 제거

#### 2.2.2 게시글 페이지네이션
- 게시글 목록을 페이지 단위로 표시
- 쿼리 필터를 통한 게시글 필터링 지원

#### 2.2.3 게시글 좋아요 (Favorite)
- 게시글에 좋아요 추가
- 게시글에서 좋아요 제거
- 좋아요한 게시글 목록 조회

### 2.3 댓글 시스템

#### 2.3.1 댓글 CRD 작업 (수정 기능 없음)
- **생성**: 게시글에 댓글 추가
- **조회**: 게시글의 전체 댓글 목록 조회
- **삭제**: 댓글 제거

### 2.4 소셜 기능

#### 2.4.1 사용자 팔로우
- 다른 사용자 팔로우
- 사용자 언팔로우
- 팔로우한 사용자 프로필 조회

#### 2.4.2 태그 시스템
- 인기 태그 목록 조회
- 태그별 게시글 필터링

---

## 3. 프론트엔드 사양

### 3.1 레이아웃 컴포넌트

#### 3.1.1 Head 섹션
- 페이지 메타데이터 (제목, 설명)
- 스타일시트 및 스크립트 링크
- Ionicon 아이콘
- Google Fonts
- 커스텀 Bootstrap 4 테마 스타일시트

#### 3.1.2 헤더 (Header)

**비인증 사용자용 헤더:**
- 홈 페이지 링크
- 로그인 페이지 링크
- 회원가입 페이지 링크
- 활성 페이지 링크에 `active` CSS 클래스 적용

**인증 사용자용 헤더:**
- 홈 페이지 링크
- 새 게시글 작성 링크
- 설정 페이지 링크
- 프로필 페이지 링크
- 활성 페이지 링크에 `active` CSS 클래스 적용

#### 3.1.3 푸터 (Footer)
- "conduit" 로고
- MIT 라이선스 Thinkster 크레딧 텍스트

### 3.2 페이지 사양

#### 3.2.1 홈 페이지
- **Global Feed** 탭
- **Your Feed** 탭 (인증 사용자만)
- 태그별 필터 탭 (선택적)
- 게시글 미리보기 (메타데이터 포함)
- 페이지네이션
- 인기 태그 사이드바

#### 3.2.2 로그인 페이지
- 이메일 입력 필드
- 비밀번호 입력 필드
- 로그인 버튼
- 에러 메시지 표시
- 회원가입 페이지 링크

#### 3.2.3 회원가입 페이지
- 사용자명 입력 필드
- 이메일 입력 필드
- 비밀번호 입력 필드
- 회원가입 버튼
- 에러 메시지 표시
- 로그인 페이지 링크

#### 3.2.4 프로필 페이지
- 사용자 프로필 이미지
- 사용자 소개 (bio)
- 팔로우/수정 버튼 (다른 사용자 프로필에서는 팔로우, 본인 프로필에서는 수정)
- **My Articles** 탭
- **Favorited Articles** 탭
- 게시글 목록

#### 3.2.5 설정 페이지
- 프로필 이미지 URL 입력 필드
- 사용자명 입력 필드
- 소개 텍스트 영역
- 이메일 입력 필드
- 비밀번호 입력 필드
- 설정 업데이트 버튼
- 로그아웃 버튼

#### 3.2.6 게시글 작성/수정 페이지 (Editor)
- 제목 입력 필드
- 설명 입력 필드
- 본문 Markdown 텍스트 영역
- 태그 입력 필드 및 태그 목록
- 게시 버튼
- 에러 메시지 표시

#### 3.2.7 게시글 상세 페이지
- 제목 배너
- 작성자 메타데이터 (프로필 이미지, 사용자명, 작성일)
- 팔로우/좋아요/수정/삭제 액션 버튼
- 게시글 본문 (Markdown 렌더링)
- 댓글 섹션
  - 댓글 목록
  - 댓글 작성 폼 (인증 사용자만)
  - 댓글 삭제 버튼 (작성자만)

---

## 4. 백엔드 API 사양

### 4.1 인증 헤더
모든 인증이 필요한 엔드포인트는 다음 헤더를 사용:
```
Authorization: Token jwt.token.here
```

### 4.2 사용자 및 인증 엔드포인트

| 엔드포인트 | 메서드 | 인증 필요 | 설명 |
|-----------|--------|----------|------|
| `/api/users/login` | POST | 아니오 | 이메일/비밀번호로 로그인, User 객체 반환 |
| `/api/users` | POST | 아니오 | 사용자명, 이메일, 비밀번호로 회원가입 |
| `/api/user` | GET | 예 | 현재 인증된 사용자 정보 반환 |
| `/api/user` | PUT | 예 | 프로필 업데이트 (이메일, 소개, 이미지, 사용자명, 비밀번호) |

### 4.3 프로필 엔드포인트

| 엔드포인트 | 메서드 | 인증 필요 | 설명 |
|-----------|--------|----------|------|
| `/api/profiles/:username` | GET | 선택적 | 특정 사용자의 프로필 반환 |
| `/api/profiles/:username/follow` | POST | 예 | 사용자 팔로우, Profile 객체 반환 |
| `/api/profiles/:username/follow` | DELETE | 예 | 사용자 언팔로우, Profile 객체 반환 |

### 4.4 게시글 엔드포인트

| 엔드포인트 | 메서드 | 인증 필요 | 설명 |
|-----------|--------|----------|------|
| `/api/articles` | GET | 선택적 | 전체 게시글 목록 반환 (쿼리 필터 지원) |
| `/api/articles/feed` | GET | 예 | 팔로우한 사용자의 게시글 반환 |
| `/api/articles/:slug` | GET | 아니오 | 단일 게시글 반환 |
| `/api/articles` | POST | 예 | 게시글 생성 (제목, 설명, 본문, 선택적 태그) |
| `/api/articles/:slug` | PUT | 예 | 게시글 수정 |
| `/api/articles/:slug` | DELETE | 예 | 게시글 삭제 |

### 4.5 댓글 엔드포인트

| 엔드포인트 | 메서드 | 인증 필요 | 설명 |
|-----------|--------|----------|------|
| `/api/articles/:slug/comments` | POST | 예 | 댓글 생성, 생성된 Comment 반환 |
| `/api/articles/:slug/comments` | GET | 선택적 | 게시글의 전체 댓글 반환 |
| `/api/articles/:slug/comments/:id` | DELETE | 예 | 댓글 삭제 |

### 4.6 좋아요 엔드포인트

| 엔드포인트 | 메서드 | 인증 필요 | 설명 |
|-----------|--------|----------|------|
| `/api/articles/:slug/favorite` | POST | 예 | 게시글에 좋아요 추가, Article 반환 |
| `/api/articles/:slug/favorite` | DELETE | 예 | 게시글에서 좋아요 제거, Article 반환 |

### 4.7 태그 엔드포인트

| 엔드포인트 | 메서드 | 인증 필요 | 설명 |
|-----------|--------|----------|------|
| `/api/tags` | GET | 아니오 | 태그 목록 반환 |

---

## 5. 데이터 모델

### 5.1 User (사용자)
```json
{
  "user": {
    "email": "string",
    "token": "string (JWT)",
    "username": "string",
    "bio": "string (optional)",
    "image": "string (URL, optional)"
  }
}
```

### 5.2 Profile (프로필)
```json
{
  "profile": {
    "username": "string",
    "bio": "string",
    "image": "string (URL)",
    "following": "boolean"
  }
}
```

### 5.3 Article (게시글)
```json
{
  "article": {
    "slug": "string",
    "title": "string",
    "description": "string",
    "body": "string (Markdown)",
    "tagList": ["string"],
    "createdAt": "datetime",
    "updatedAt": "datetime",
    "favorited": "boolean",
    "favoritesCount": "number",
    "author": "Profile"
  }
}
```

### 5.4 Comment (댓글)
```json
{
  "comment": {
    "id": "number",
    "createdAt": "datetime",
    "updatedAt": "datetime",
    "body": "string",
    "author": "Profile"
  }
}
```

### 5.5 Tag (태그)
```json
{
  "tags": ["string"]
}
```

---

## 6. 기술 구현 세부사항

### 6.1 백엔드 구현

#### 6.1.1 Go 서버 아키텍처
- **패키지 구조**: 명확한 도메인 분리 (handlers, services, repositories)
- **HTTP 서버**: 표준 `net/http` 또는 경량 프레임워크 (예: Chi, Gin)
- **미들웨어**: 인증, 로깅, CORS, 에러 핸들링
- **의존성 주입**: 명시적 의존성 전달 (복잡한 DI 프레임워크 회피)

#### 6.1.2 데이터베이스
- **SQLite3**: 파일 기반 데이터베이스 (`database/sql` + SQLite 드라이버)
- **마이그레이션**: SQL 파일 기반 마이그레이션 또는 `golang-migrate`
- **쿼리 작성**: Plain SQL 사용 (ORM 회피)
  - Prepared statements로 SQL injection 방지
  - 명시적이고 이해하기 쉬운 쿼리
- **트랜잭션**: 명시적 트랜잭션 관리

#### 6.1.3 인증 및 보안
- **JWT 생성/검증**: `golang-jwt/jwt` 라이브러리
- **비밀번호 해싱**: `bcrypt` 또는 `argon2`
- **토큰 전달**: Authorization 헤더 (`Authorization: Token jwt.token.here`)
- **환경 변수**: JWT 시크릿 등 민감 정보는 환경 변수로 관리

#### 6.1.4 API 설계
- **RESTful 엔드포인트**: 명확한 리소스 기반 URL 구조
- **JSON 응답**: 일관된 응답 형식
- **에러 핸들링**:
  - HTTP 상태 코드 적절히 사용 (200, 201, 400, 401, 404, 500 등)
  - 구조화된 에러 응답 (`{"errors": {"body": ["error message"]}}`)
- **CORS**: 프론트엔드 도메인 허용

### 6.2 프론트엔드 구현

#### 6.2.1 React 애플리케이션 구조
- **컴포넌트 구조**: 기능별/페이지별 컴포넌트 분리
- **재사용 컴포넌트**: shadcn/ui 컴포넌트 활용
- **타입 안전성**: TypeScript 사용 권장 (선택적)

#### 6.2.2 스타일링
- **Tailwind CSS**: 유틸리티 클래스 기반 스타일링
- **shadcn/ui 컴포넌트**:
  - Button, Input, Card, Dialog 등 재사용 가능한 UI 컴포넌트
  - Tailwind CSS와 통합된 일관된 디자인 시스템
  - 접근성 기본 지원
- **반응형 디자인**: Tailwind의 반응형 유틸리티 활용
- **다크 모드**: 선택적으로 다크 모드 지원 가능

#### 6.2.3 상태 관리 및 데이터 페칭
- **TanStack Query**:
  - 서버 상태 관리 및 캐싱
  - API 호출 자동 재시도 및 백그라운드 갱신
  - 로딩/에러 상태 관리
- **로컬 상태**: React의 `useState`, `useContext` 활용
- **폼 관리**: React Hook Form 또는 기본 폼 핸들링

#### 6.2.4 라우팅
- **TanStack Router**:
  - 타입 안전한 라우팅
  - 파라미터 및 검색 쿼리 타입 검증
  - 레이아웃 기반 라우팅
  - 인증 가드 구현

#### 6.2.5 Markdown 렌더링
- **react-markdown** 또는 **@uiw/react-markdown-preview**
- XSS 방지를 위한 sanitization
- 코드 하이라이팅 (선택적)

### 6.3 개발 환경 및 도구

#### 6.3.1 Docker 환경
- **개발 환경**:
  - `docker-compose.yml`로 프론트엔드/백엔드 통합 환경
  - 볼륨 마운트로 코드 변경 시 자동 재로드
  - 개발 중 권한 검사 비활성화 (Docker로 격리)
- **프로덕션 환경**:
  - 멀티 스테이지 빌드로 최적화된 이미지
  - 최소 권한으로 컨테이너 실행

#### 6.3.2 Makefile
- **주요 명령어**:
  - `make build`: 백엔드/프론트엔드 빌드
  - `make test`: 테스트 실행
  - `make run`: 로컬 개발 서버 실행
  - `make docker-up`: Docker 환경 시작
  - `make docker-down`: Docker 환경 종료
- **프로세스 관리**: pidfile을 통한 중복 실행 방지

#### 6.3.3 로깅
- **백엔드**: 구조화된 로깅 (JSON 형식 권장)
  - 파일 및 stdout 모두 기록
  - 로그 레벨 지원 (DEBUG, INFO, WARN, ERROR)
- **프론트엔드**: 개발 환경에서 상세 로깅, 프로덕션에서 에러만 기록

### 6.4 테스트

#### 6.4.1 백엔드 테스트
- **유닛 테스트**: Go의 표준 `testing` 패키지
- **테스트 커버리지**: `go test -cover`
- **테스트 데이터베이스**: 인메모리 SQLite (`:memory:`)
- **HTTP 핸들러 테스트**: `httptest` 패키지 활용

#### 6.4.2 프론트엔드 테스트
- **유닛/통합 테스트**: Vitest (Vite 기반 테스트 도구)
- **컴포넌트 테스트**: React Testing Library
- **E2E 테스트** (선택적): Playwright

---

## 7. 사용자 플로우

### 7.1 비인증 사용자 플로우
1. 홈 페이지 방문 → Global Feed 게시글 목록 조회
2. 게시글 클릭 → 게시글 상세 및 댓글 조회
3. 회원가입/로그인 → 인증 사용자로 전환

### 7.2 인증 사용자 플로우
1. 로그인 → JWT 토큰 획득
2. Your Feed 조회 → 팔로우한 사용자의 게시글 확인
3. 게시글 작성 → 제목, 설명, 본문, 태그 입력 후 게시
4. 다른 사용자 프로필 방문 → 팔로우/언팔로우
5. 게시글 좋아요/댓글 작성
6. 본인 게시글 수정/삭제
7. 설정 페이지에서 프로필 업데이트
8. 로그아웃

---

## 8. UI/UX 요구사항

### 8.1 일관성
- 모든 페이지에서 일관된 헤더/푸터
- 활성 페이지 링크에 `active` CSS 클래스 적용
- 일관된 색상, 타이포그래피, 간격

### 8.2 피드백
- 로딩 상태 표시
- 성공/실패 메시지
- 폼 유효성 검사 에러 표시
- 빈 상태 처리 (게시글 없음, 댓글 없음 등)

### 8.3 접근성
- 시맨틱 HTML 사용
- 적절한 ARIA 레이블
- 키보드 네비게이션 지원

---

## 9. 성능 요구사항

### 9.1 최적화
- 페이지네이션을 통한 대량 데이터 처리
- 이미지 최적화
- 불필요한 API 호출 최소화

### 9.2 응답성
- 빠른 페이지 로드 시간
- 부드러운 페이지 전환
- 효율적인 상태 관리

---

## 10. 보안 요구사항

### 10.1 인증 및 권한
- JWT 토큰 안전하게 저장 및 관리
- 민감한 정보 암호화 (비밀번호 등)
- 인증이 필요한 작업에 대한 권한 검증

### 10.2 입력 검증
- 클라이언트 및 서버 측 입력 유효성 검사
- XSS (Cross-Site Scripting) 방지
- SQL Injection 방지 (해당되는 경우)

### 10.3 CORS
- 적절한 CORS 정책 설정
- 허용된 출처만 API 접근 가능

---

## 11. 배포 및 운영

### 11.1 배포

#### 11.1.1 Docker 기반 배포
- **개발 환경**:
  ```bash
  # docker-compose를 이용한 로컬 개발 환경 실행
  make docker-up
  # 또는
  docker-compose up -d
  ```
  - 프론트엔드: `http://localhost:5173` (Vite 개발 서버)
  - 백엔드: `http://localhost:8080` (Go API 서버)
  - SQLite 데이터베이스: 볼륨 마운트로 영속성 보장

- **프로덕션 빌드**:
  - **백엔드 Dockerfile**:
    - 멀티 스테이지 빌드 (빌드 스테이지 + 런타임 스테이지)
    - 경량 베이스 이미지 사용 (예: `alpine`)
    - SQLite 데이터베이스 파일 볼륨 마운트
  - **프론트엔드 Dockerfile**:
    - 프로덕션 빌드 생성 (`npm run build`)
    - Nginx 또는 정적 파일 서버로 서빙
  - **docker-compose.prod.yml**:
    - 프로덕션 환경 변수 설정
    - 리버스 프록시 설정 (선택적)
    - 볼륨 및 네트워크 구성

#### 11.1.2 환경 변수 관리
- **백엔드 환경 변수**:
  - `PORT`: 서버 포트 (기본값: 8080)
  - `JWT_SECRET`: JWT 서명용 시크릿 키
  - `DATABASE_PATH`: SQLite 데이터베이스 파일 경로
  - `CORS_ORIGIN`: 허용할 프론트엔드 도메인
  - `LOG_LEVEL`: 로그 레벨 (DEBUG, INFO, WARN, ERROR)

- **프론트엔드 환경 변수**:
  - `VITE_API_URL`: 백엔드 API URL
  - `VITE_APP_NAME`: 애플리케이션 이름

- **.env 파일**:
  - `.env.example` 파일 제공 (민감 정보 제외)
  - `.env` 파일은 `.gitignore`에 추가
  - Docker에서는 `env_file` 또는 환경 변수 전달

#### 11.1.3 CI/CD 파이프라인 (선택적)
- **GitHub Actions**:
  - 코드 푸시 시 자동 테스트 실행
  - Docker 이미지 빌드 및 레지스트리 푸시
  - 배포 자동화 (예: AWS ECS, Google Cloud Run)
- **테스트 자동화**: PR 생성 시 자동 테스트 실행

### 11.2 문서화
- README.md 작성
  - 프로젝트 설명
  - 로컬 개발 환경 설정 방법
  - 사용된 기술 스택
  - API 문서 링크
- 코드 주석 (필요한 경우)

### 11.3 버전 관리
- Git을 통한 버전 관리
- 의미있는 커밋 메시지
- GitHub Issues를 통한 이슈 관리

---

## 12. 참고 자료

- **공식 문서**: https://docs.realworld.show
- **데모 사이트**: https://demo.realworld.io
- **GitHub**: https://github.com/gothinkster/realworld

---

## 13. 변경 이력

| 버전 | 날짜 | 변경 내용 | 작성자 |
|------|------|----------|--------|
| 1.0 | 2025-11-19 | 초기 PRD 문서 생성 | - |
| 1.1 | 2025-11-19 | Agentic Coding 최적화 기술 스택 추가 (Go, SQLite, React, Tailwind+shadcn, Docker) | - |
